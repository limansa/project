
//how_bitmap函式可將二維陣列的值輸出，輸出方式:當bit為1時輸出’*’,0輸出空白
//字元’  ’，每處理完2個byte輸出換行'\n' 
#include <stdio.h>
#include <signal.h>

void PrintByte(char);

void show_bitmap(char (*a)[30],int row) {
  int i=0, j=0;

  for (i=0;i<row;++i) {
    for (j=0;j<30;++j) {
      PrintByte(a[i][j]);
      if ((j%2) == 1) {
        printf("\n");
      }
    }
  }
}

char array[2][30]=
{{0x8,0x20,0x8,0x24,0xfe,0xfe,0x8,0x20,
	 0x0,0x0,0x8,0x20,0x4,0x40,0x4,0x40,
	  0x2,0x80,0x1,0x0,0x2,0x80,0xc,0x70,
	   0x30,0xe,0xc0,0x4,0x0,0x0
},
{
	0x20,0x20,0x51,0xfc,0x88,0x88,0x0,0x50,
	0xfb,0xfe,0x22,0x22,0x22,0x22,0xf9,0xfc,
	0x21,0x24,0x21,0x24,0xa9,0x24,0x71,0x2c,
	0x20,0x20,0xf8,0x20,0x0,0x0
}
};

void PrintByte(char byte) {
  int i;

  for (i=7; i>=0; --i) {
    printf("%c", (byte & (1<<i)) ? '*' : ' ');
  }
}

void AlarmShowBitmap(int sig) {
  static int count=0;

  show_bitmap(array, 2);
  printf("count = %d\n", ++count);
  alarm(2);
}

void main()
{
  
  signal(SIGALRM, AlarmShowBitmap);
  alarm(2);
  while (1) {
    pause();
  }
}
